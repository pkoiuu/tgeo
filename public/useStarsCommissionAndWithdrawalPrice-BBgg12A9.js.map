{"version":3,"file":"useStarsCommissionAndWithdrawalPrice-BBgg12A9.js","sources":["../src/components/sidebarLeft/tabs/privacy/messages/useStarsCommissionAndWithdrawalPrice.ts"],"sourcesContent":["import {Accessor, createMemo} from 'solid-js';\nimport {MTAppConfig} from '../../../../../lib/mtproto/appConfig';\nimport useAppConfig from './useAppConfig';\n\n\ntype Options = {\n  commissionKey?: keyof MTAppConfig;\n  withdrawRateKey?: keyof MTAppConfig;\n}\n\nconst useStarsCommissionAndWithdrawalPrice = (stars: Accessor<number>, {\n  commissionKey = 'stars_paid_message_commission_permille',\n  withdrawRateKey = 'stars_usd_withdraw_rate_x1000'\n}: Options = {}) => {\n  const [appConfig] = useAppConfig();\n\n  const commission = createMemo(() => (+appConfig()?.[commissionKey] || 0) / 1000);\n  const centsPerStar = createMemo(() => (+appConfig()?.[withdrawRateKey] || 0) / 1000);\n\n  const commissionPercents = createMemo(() => Math.round(commission() * 100));\n  const willReceiveDollars = createMemo(() => Math.max(0.01 * Number(!!stars()), Math.round(commission() * centsPerStar() * stars()) / 100));\n\n  return {\n    commissionPercents,\n    willReceiveDollars\n  }\n};\n\nexport default useStarsCommissionAndWithdrawalPrice;\n"],"names":["useStarsCommissionAndWithdrawalPrice","stars","commissionKey","withdrawRateKey","appConfig","useAppConfig","commission","createMemo","centsPerStar","commissionPercents","willReceiveDollars"],"mappings":"wFAUM,MAAAA,EAAuC,CAACC,EAAyB,CACrE,cAAAC,EAAgB,yCAChB,gBAAAC,EAAkB,+BACpB,EAAa,KAAO,CACZ,KAAA,CAACC,CAAS,EAAIC,EAAa,EAE3BC,EAAaC,EAAW,KAAO,CAACH,MAAcF,CAAa,GAAK,GAAK,GAAI,EACzEM,EAAeD,EAAW,KAAO,CAACH,MAAcD,CAAe,GAAK,GAAK,GAAI,EAE7EM,EAAqBF,EAAW,IAAM,KAAK,MAAMD,EAAW,EAAI,GAAG,CAAC,EACpEI,EAAqBH,EAAW,IAAM,KAAK,IAAI,IAAO,CAAO,CAAC,CAACN,EAAM,EAAI,KAAK,MAAMK,IAAeE,IAAiBP,EAAO,CAAA,EAAI,GAAG,CAAC,EAElI,MAAA,CACL,mBAAAQ,EACA,mBAAAC,CACF,CACF"}