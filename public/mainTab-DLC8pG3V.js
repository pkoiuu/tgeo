import{b_ as oe,t as R,i as C,a1 as A,C as J,a0 as M,a as v,a4 as V,b as n,bw as de,a9 as Z,a6 as H,c as I,ae as ge,a5 as me,b$ as he,a8 as pe,ah as Se,bZ as fe,bx as W,a3 as ee,dq as te,ad as N,eq as x,a2 as X,h as m,bv as _e}from"./index-cZ9AAHAN.js";import{u as se}from"./actions-nLtYL2vm.js";import{G as be,H as ae,R as b,J as Y,v as ve}from"./appDialogsManager-cbS0liPA.js";import{S as Pe}from"./staticSwitch-BARgWXZX.js";import{S as U}from"./space-z84hZv3d.js";import{I as ne}from"./iconTsx-BuRFsxGS.js";import{L as ce,c as ye}from"./lottieAnimation-ohgsRc06.js";import{T as ke}from"./chatBackground-CDnnrmlv.js";import"./page-B3fcTjWa.js";import"./avatar-wf2_bAoN.js";import"./putPreloader-Bm9gUdtL.js";import"./classNames-0npoXsmd.js";import"./htmlToSpan-DhAls8qz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./textToSvgURL-Cnw_Q8Rw.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-D86-3P02.js";import"./codeInputField-B-BjYjUz.js";const Ce="_Container_1qplo_1",Le="_KeysContainer_1qplo_7",we="_KeyButton_1qplo_13",Te="_selected_1qplo_35",Ee="_KeyButtonFirst_1qplo_53",$e="_KeyButtonLast_1qplo_57",Be="_PlusIcon_1qplo_62",Me="_TargetKey_1qplo_67",$={Container:Ce,KeysContainer:Le,KeyButton:we,selected:Te,KeyButtonFirst:Ee,KeyButtonLast:$e,PlusIcon:Be,TargetKey:Me};var Re=R("<span>"),Ke=R("<div><div></div><div>"),xe=R("<button>");const Q=["Ctrl","Alt","Shift","Meta"],Oe=o=>{const d=oe(()=>o.value,(a,l)=>l.includes(a)),P=a=>a==="Meta"?n(ne,{icon:de?"mac_command_key":"win_key"}):(()=>{var l=Re();return C(l,a),l})(),L=a=>{if(o.value.includes(a)){const l=o.value.filter(h=>h!==a);if(!l.length){const h=[0,1,2,3].filter(e=>e!==Q.indexOf(a));l.push(Q[h[Math.floor(Math.random()*h.length)]])}o.onChange(l)}else o.onChange([...o.value,a])};return(()=>{var a=Ke(),l=a.firstChild,h=l.nextSibling;return C(l,()=>Q.map((e,r,y)=>(()=>{var f=xe();return f.$$click=L,f.$$clickData=e,A(J,f,()=>!0),C(f,()=>P(e)),M(t=>{var g=$.KeyButton,u={[$.selected]:d(e),[$.KeyButtonFirst]:r===0,[$.KeyButtonLast]:r===y.length-1};return g!==t.e&&v(f,t.e=g),t.t=V(f,u,t.t),t},{e:void 0,t:void 0}),f})())),C(a,n(ne,{get class(){return $.PlusIcon},icon:"plus"}),h),C(h,()=>o.key),M(e=>{var r=$.Container,y={[o.class]:!!o.class},f=$.KeysContainer,t=$.TargetKey;return r!==e.e&&v(a,e.e=r),e.t=V(a,y,e.t),f!==e.a&&v(l,e.a=f),t!==e.o&&v(h,e.o=t),e},{e:void 0,t:void 0,a:void 0,o:void 0}),a})()};Z(["click"]);const De="_Overlay_deagn_36",Ae="_Value_deagn_45",He="_Select_deagn_52",Ie="_SelectClip_deagn_63",qe="_Option_deagn_75",Fe="_selected_deagn_87",K={Overlay:De,Value:Ae,Select:He,SelectClip:Ie,Option:qe,selected:Fe};var Ne=R("<div>"),Ve=R("<div><div><div>"),Ue=R("<div><span>");const ze=o=>{let d;const P=H(()=>o.options.find(t=>t.value===o.value)?.label),[L,a]=I();ge(()=>{a(P()())});const l=oe(()=>o.value),[h,e]=I();me(()=>{const t=new W;t.add(window)("resize",()=>{o.isOpen&&o.onClose?.()}),ee(()=>{t.removeAll()})});const r=(t,g)=>{const u=t.firstElementChild,i=u.querySelector(`.${K.selected}`);if(!i||!u)return;const c=d.getBoundingClientRect(),p=u.getBoundingClientRect(),S=i.getBoundingClientRect(),k=S.top-p.top,w=k+S.height,q=k+S.height/2,z=c.left+c.width/2;let T=c.top+c.height/2-q;const D=T+p.height>window.innerHeight||T<0;if(D&&(T+=Math.max(0,-T)+Math.min(0,window.innerHeight-(T+p.height))),u.style.setProperty("--x",""+z),u.style.setProperty("--y",""+T),u.animate({opacity:[0,1]},{duration:120}).finished.then(()=>{D&&g()}),D)return;const F=Math.max(k,p.height-w),G=E=>`polygon(0% ${k-E}px, 100% ${k-E}px, 100% ${w+E}px, 0px ${w+E}px)`;Se(0,F,400,E=>{u.style.setProperty("clip-path",G(E))},{easing:fe,onEnd:()=>{u.style.removeProperty("clip-path"),g()}})},y=async(t,g)=>{await t.firstElementChild.animate({opacity:[1,0]},{duration:120}).finished,g()},f=t=>{const g=[o.parent,h()];if(!g.every(Boolean))return;g.every(i=>{const c=i.getBoundingClientRect();return Math.max(c.left-t.clientX,t.clientX-c.right,c.top-t.clientY,t.clientY-c.bottom)>100})&&o.onClose?.()};return[(()=>{var t=Ne(),g=d;return typeof g=="function"?A(g,t):d=t,C(t,L),M(()=>v(t,K.Value)),t})(),n(pe,{get children(){return n(ke,{appear:!0,onEnter:r,onExit:y,get children(){return H(()=>!!o.isOpen)()&&(()=>{var t=Ve(),g=t.firstChild,u=g.firstChild;return t.$$mousemove=f,t.$$click=i=>{i.stopPropagation(),o.onClose?.()},A(e,u),C(u,n(he,{get each(){return o.options},children:i=>(()=>{var c=Ue(),p=c.firstChild;return c.$$click=o.onChange,c.$$clickData=i.value,A(J,c,()=>!0),C(p,()=>i.label()),M(S=>{var k=K.Option,w={[K.selected]:l(i.value)};return k!==S.e&&v(c,S.e=k),S.t=V(c,w,S.t),S},{e:void 0,t:void 0}),c})()})),M(i=>{var c=K.Overlay,p=K.SelectClip,S=K.Select;return c!==i.e&&v(t,i.e=c),p!==i.t&&v(g,i.t=p),S!==i.a&&v(u,i.a=S),i},{e:void 0,t:void 0,a:void 0}),t})()}})}})]};Z(["click","mousemove"]);const Ge="_MainDescription_1pm2o_36",Qe="_FirstSection_1pm2o_44",Xe="_Row_1pm2o_49",Ye="_ShortcutBuilderRow_1pm2o_54",je="_ShortcutBuilderRowChild_1pm2o_60",Je="_collapsed_1pm2o_63",Ze="_Hint_1pm2o_68",B={MainDescription:Ge,FirstSection:Qe,Row:Xe,ShortcutBuilderRow:Ye,ShortcutBuilderRowChild:je,collapsed:Je,Hint:Ze};var re=R("<div>"),We=R('<div><button class="btn-primary btn-color-primary btn-large">');const j=(o,d)=>({appendTo:o.scrollable.container,duration:2500,from:"bottom",textElement:m(d),icon:"premium_lock",class:B.Hint,canCloseOnPeerChange:!1}),vt=()=>{const{rootScope:o}=te(),d=be(),[P,{mutate:L}]=N(()=>{const e=o.managers.appStateManager.getState().then(r=>r.settings?.passcode?.enabled||!1);return d.collect(e),e}),[a,l]=I(!1),h=new W;return h.add(o)("settings_updated",({key:e,value:r})=>{e===x("settings","passcode","enabled")&&L(r)}),ee(()=>{h.removeAll()}),n(X,{get when(){return P.state==="ready"},get children(){return H(()=>!!(P()||a()))()?n(tt,{onDisable:()=>l(!0)}):n(et,{})}})},et=()=>{const[o,{AppPasscodeEnterPasswordTab:d,AppPasscodeLockTab:P}]=ae(),{enablePasscode:L}=se(),{setQuizHint:a}=te(),l=()=>{o.slider.createTab(d).open({onSubmit:e=>{h(e),e=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"})},h=e=>{o.slider.createTab(d).open({onSubmit:async(r,y)=>{if(r!==e)throw{};await L(r),r="",y.slider.sliceTabsUntilTab(P,y),y.close(),a(j(o,"PasscodeLock.PasscodeHasBeenSet"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"})};return n(Y,{caption:"PasscodeLock.Notice",get children(){return[n(ce,{name:"UtyanPasscode"}),(()=>{var e=re();return C(e,()=>m("PasscodeLock.Description")),M(()=>v(e,B.MainDescription)),e})(),n(U,{amount:"0.5rem"}),(()=>{var e=We(),r=e.firstChild;return r.$$click=l,A(J,r,()=>!0),C(r,()=>m("PasscodeLock.TurnOn")),M(()=>v(e,ye.AdditionalPadding)),e})(),n(U,{amount:"1rem"})]}})},tt=o=>{const[d,{AppPasscodeEnterPasswordTab:P,AppPasscodeLockTab:L,AppPrivacyAndSecurityTab:a}]=ae(),{disablePasscode:l,changePasscode:h}=se(),{rootScope:e,setQuizHint:r}=te(),y=[{value:0,label:()=>m("PasscodeLock.Disabled")},{value:1,label:()=>m("MinutesShort",[1])},{value:5,label:()=>m("MinutesShort",[5])},{value:10,label:()=>m("MinutesShort",[10])},{value:15,label:()=>m("MinutesShort",[15])},{value:30,label:()=>m("MinutesShort",[30])}],[f,t]=I(),[g,u]=I(!1),[i,{mutate:c}]=N(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.autoLockTimeoutMins||0)),[p,{mutate:S}]=N(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.lockShortcutEnabled||!1)),[k,{mutate:w}]=N(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.lockShortcut||[])),q=new W;q.add(e)("settings_updated",({key:s,value:_})=>{s===x("settings","passcode","lockShortcut")?w(_):s===x("settings","passcode","lockShortcutEnabled")?S(_):s===x("settings","passcode","autoLockTimeoutMins")&&c(_)});function z(s){w(s),e.managers.appStateManager.setByKey(x("settings","passcode","lockShortcut"),s)}function T(s){S(s),e.managers.appStateManager.setByKey(x("settings","passcode","lockShortcutEnabled"),s)}function D(s){c(s),e.managers.appStateManager.setByKey(x("settings","passcode","autoLockTimeoutMins"),s)}ee(()=>{q.removeAll()});const F=()=>!_e&&k.state==="ready"&&p.state==="ready",G=()=>{d.slider.createTab(P).open({onSubmit:s=>{E(s),s=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"},"PasscodeLock.EnterANewPasscode")},E=s=>{d.slider.createTab(P).open({onSubmit:async(_,O)=>{if(_!==s)throw{};await h(_),_="",O.slider.sliceTabsUntilTab(L,O),O.close(),r(j(d,"PasscodeLock.PasscodeHasBeenChanged"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"},"PasscodeLock.ReEnterPasscode")},ie=()=>{ve({title:m("PasscodeLock.TurnOff.Title"),description:m("PasscodeLock.TurnOff.Description"),button:{text:m("PasscodeLock.TurnOff"),isDanger:!0}}).then(async()=>{o.onDisable(),await l(),d.close(),r(j(d.slider.getTab(a),"PasscodeLock.PasscodeHasBeenDisabled"))}).catch(()=>{})},le=[H(()=>m("PasscodeLock.Description")),n(U,{amount:"1rem"}),H(()=>m("PasscodeLock.Notice"))];return[n(Y,{get class(){return B.FirstSection},caption:le,get children(){return[n(ce,{name:"UtyanPasscode"}),n(U,{amount:"1.125rem"}),n(b,{clickable:ie,get children(){return[n(b.Icon,{icon:"lockoff"}),n(b.Title,{get children(){return m("PasscodeLock.TurnOff.Title")}})]}}),n(b,{clickable:G,get children(){return[n(b.Icon,{icon:"key"}),n(b.Title,{get children(){return m("PasscodeLock.ChangePasscode")}})]}})]}}),n(Y,{get caption(){return F()?"PasscodeLock.LockShortcutDescription":void 0},get children(){return[n(X,{get when(){return i.state==="ready"},get children(){return n(b,{ref:t,get class(){return B.Row},clickable:()=>{u(!0)},get children(){return[n(b.Title,{get children(){return m("PasscodeLock.AutoLock")}}),n(b.RightContent,{get children(){return n(ze,{get value(){return i()},onClose:()=>u(!1),options:y,onChange:D,get isOpen(){return g()},get parent(){return f()}})}})]}})}}),n(X,{get when(){return F()},get children(){return[n(b,{get class(){return B.Row},clickable:s=>{T(!p())},get children(){return[n(b.Title,{get children(){return m("PasscodeLock.EnableLockShortcut")}}),n(b.RightContent,{get children(){return n(Pe,{get checked(){return p()}})}})]}}),(()=>{var s=re();return C(s,n(Oe,{get class(){return B.ShortcutBuilderRowChild},get value(){return k()||[]},onChange:z,key:"L"})),M(_=>{var O=B.ShortcutBuilderRow,ue={[B.collapsed]:!p()};return O!==_.e&&v(s,_.e=O),_.t=V(s,ue,_.t),_},{e:void 0,t:void 0}),s})()]}})]}})]};Z(["click"]);export{vt as default};
//# sourceMappingURL=mainTab-DLC8pG3V.js.map
