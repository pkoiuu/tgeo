import{dq as A,a6 as B,ad as F,Q as N,c as q,ae as G,M as Q,a3 as y,b as d,t as $,i as c,a0 as j,a as i,a4 as z,a2 as J,D as K}from"./index-cZ9AAHAN.js";import{d as O,a as U,c as V,B as W,P as X,I as Y}from"./appDialogsManager-cbS0liPA.js";import"./page-B3fcTjWa.js";import"./avatar-wf2_bAoN.js";import"./putPreloader-Bm9gUdtL.js";import"./classNames-0npoXsmd.js";import"./htmlToSpan-DhAls8qz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./textToSvgURL-Cnw_Q8Rw.js";import"./iconTsx-BuRFsxGS.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-D86-3P02.js";import"./chatBackground-CDnnrmlv.js";import"./codeInputField-B-BjYjUz.js";const Z="_Container_1k29u_1",ee="_InnerContainer_1k29u_9",te="_hidden_1k29u_24",ne="_Header_1k29u_29",ae="_TitleContainer_1k29u_35",oe="_Title_1k29u_35",ie="_Subtitle_1k29u_47",re="_ScrollableContainer_1k29u_52",a={Container:Z,InnerContainer:ee,hidden:te,Header:ne,TitleContainer:ae,Title:oe,Subtitle:ie,ScrollableContainer:re};var se=$("<div><div><div><div></div></div></div><div>");const ke=O({name:"monoforum-drawer",component:(t,le,C)=>{const{appDialogsManager:f,AutonomousMonoforumThreadList:x,appSidebarLeft:v,apiManagerProxy:D,rootScope:w}=A(),u=()=>N.isAvailable("animations");U(t.element,a.Container);const _=B(()=>{const n=D.getChat(t.peerId.toChatId());if(n?._==="channel"&&n?.pFlags?.monoforum)return n;setTimeout(()=>{t?.onClose()},0)}),[h]=F(()=>w.managers.monoforumDialogsStorage.getDialogs({parentPeerId:t.peerId,limit:1})),g=u()&&!v.isCollapsed(),[E,b]=q(g);G(()=>{!_()||!g||u()&&Q().then(()=>b(!1))});const o=V({peerId:t.peerId,appDialogsManager:f,AutonomousMonoforumThreadList:x});C.autonomousList=o,y(()=>{o.destroy()});const R=o.sortedList.list;f.setListClickListener({list:R,onFound:null,withContext:!0});function I(){t.element.remove()}async function r(){try{t.onClose?.()}catch{}if(!u())return I();v.isCollapsed()||b(!0),await K(200),I()}C.close=r,o.onEmpty=r;const S=n=>{n.target===t.element&&r()};return t.element.addEventListener("click",S),y(()=>t.element.removeEventListener("click",S)),d(J,{get when(){return _()},get children(){var n=se(),s=n.firstChild,l=s.firstChild,m=l.firstChild,T=s.nextSibling;return c(s,d(W,{class:"sidebar-close-button",icon:"close",noRipple:!0,onClick:r}),l),c(l,d(X,{get class(){return a.Title},get peerId(){return t.peerId}}),m),c(m,d(Y,{key:"ChannelDirectMessages.ThreadsCount",get args(){return[h()?h().count+"":"~"]}})),c(T,()=>o.scrollable.container),j(e=>{var k=a.InnerContainer,P={[a.hidden]:E()},L=`sidebar-header ${a.Header}`,H=a.TitleContainer,M=a.Subtitle,p=a.ScrollableContainer;return k!==e.e&&i(n,e.e=k),e.t=z(n,P,e.t),L!==e.a&&i(s,e.a=L),H!==e.o&&i(l,e.o=H),M!==e.i&&i(m,e.i=M),p!==e.n&&i(T,e.n=p),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),n}})}});export{ke as default};
//# sourceMappingURL=index-3wst9HS9.js.map
