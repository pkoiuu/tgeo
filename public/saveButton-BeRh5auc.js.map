{"version":3,"file":"saveButton-BeRh5auc.js","sources":["../src/components/sidebarLeft/tabs/privacy/messages/useIsConfirmationNeededOnClose.ts","../src/components/sidebarLeft/tabs/privacy/messages/appearZoomTransition.tsx","../src/components/sidebarLeft/tabs/privacy/messages/saveButton.tsx"],"sourcesContent":["import {Accessor} from 'solid-js';\nimport type {LangPackKey} from '../../../../../lib/langPack';\nimport confirmationPopup, {ConfirmationPopupRejectReason} from '../../../../confirmationPopup';\nimport {PopupPeerOptions} from '../../../../popups/peer';\n\n\ntype UseIsConfirmationNeededOnCloseArgs = {\n  descriptionLangKey: LangPackKey;\n  hasChanges: Accessor<boolean>;\n  saveAllSettings: () => Promise<void>;\n};\n\nconst useIsConfirmationNeededOnClose = ({descriptionLangKey, hasChanges, saveAllSettings}: UseIsConfirmationNeededOnCloseArgs) => async() => {\n  if(!hasChanges()) return;\n\n  const saveButton: PopupPeerOptions['buttons'][number] = {\n    langKey: 'Save'\n  };\n\n  try {\n    await confirmationPopup({\n      titleLangKey: 'UnsavedChanges',\n      descriptionLangKey,\n      button: saveButton,\n      buttons: [\n        saveButton,\n        {isCancel: true, langKey: 'Discard'}\n      ],\n      rejectWithReason: true\n    });\n    saveAllSettings();\n  } catch(_reason: any) {\n    const reason: ConfirmationPopupRejectReason = _reason;\n\n    if(reason === 'closed') throw new Error();\n  }\n};\n\nexport default useIsConfirmationNeededOnClose;\n","import {ParentComponent} from 'solid-js';\nimport {Transition} from 'solid-transition-group';\n\n\nconst animateEl = (backwards = false) => async(el: Element, done: () => void) => {\n  const keyframes = ['scale(0)', 'scale(1)'];\n  if(backwards) keyframes.reverse();\n\n  await el.animate(\n    {transform: keyframes},\n    {duration: 80}\n  ).finished;\n\n  done();\n};\n\nconst AppearZoomTransition: ParentComponent = (props) => {\n  return (\n    <Transition\n      onEnter={animateEl()}\n      onExit={animateEl(true)}\n    >\n      {props.children}\n    </Transition>\n  );\n};\n\nexport default AppearZoomTransition;\n","import {Component, Show} from 'solid-js';\nimport {IconTsx} from '../../../../iconTsx';\nimport ripple from '../../../../ripple';\nimport AppearZoomTransition from './appearZoomTransition';\nripple; // keep\n\n\nconst SaveButton: Component<{\n  hasChanges: boolean;\n  onClick: () => void;\n}> = (props) => {\n  return (\n    <AppearZoomTransition>\n      <Show when={props.hasChanges}>\n        <button\n          use:ripple\n          class=\"btn-icon blue\"\n          onClick={props.onClick}\n        >\n          <IconTsx icon=\"check\" />\n        </button>\n      </Show>\n    </AppearZoomTransition>\n  )\n};\n\nexport default SaveButton;\n"],"names":["useIsConfirmationNeededOnClose","descriptionLangKey","hasChanges","saveAllSettings","saveButton","confirmationPopup","_reason","animateEl","backwards","el","done","keyframes","reverse","animate","transform","duration","finished","AppearZoomTransition","props","_$createComponent","Transition","onEnter","onExit","children","SaveButton","Show","when","_el$","_tmpl$","_$addEventListener","onClick","_$use","ripple","_$insert","IconTsx","icon","_$delegateEvents"],"mappings":"4OAYA,MAAMA,EAAiC,CAAC,CAAC,mBAAAC,EAAoB,WAAAC,EAAY,gBAAAC,KAAyD,SAAW,CAC3I,GAAG,CAACD,EAAW,EAAG,OAElB,MAAME,EAAkD,CACtD,QAAS,MACX,EAEI,GAAA,CACF,MAAMC,EAAkB,CACtB,aAAc,iBACd,mBAAAJ,EACA,OAAQG,EACR,QAAS,CACPA,EACA,CAAC,SAAU,GAAM,QAAS,SAAS,CACrC,EACA,iBAAkB,EAAA,CACnB,EACeD,EAAA,QACVG,EAAc,CAGpB,GAF8CA,IAEhC,SAAU,MAAM,IAAI,KAAM,CAE5C,EChCMC,EAAYA,CAACC,EAAY,KAAU,MAAMC,EAAaC,IAAqB,CAC/E,MAAMC,EAAY,CAAC,WAAY,UAAU,EACtCH,GAAWG,EAAUC,QAAS,EAEjC,MAAMH,EAAGI,QACP,CAACC,UAAWH,CAAS,EACrB,CAACI,SAAU,EACb,CAAA,EAAEC,SAEFN,EAAM,CACR,EAEMO,EAAyCC,GAC7CC,EACGC,EAAU,CAAA,IACTC,SAAO,CAAA,OAAEd,EAAW,CAAA,EAAA,IACpBe,QAAM,CAAA,OAAEf,EAAU,EAAI,CAAC,EAAA,IAAAgB,UAAA,CAAA,OAEtBL,EAAMK,QAAQ,CAAA,CAAA,4CCffC,MAAAA,EAGAN,GACJC,EACGF,EAAoB,CAAA,IAAAM,UAAA,CAAA,OAAAJ,EAClBM,EAAI,CAAA,IAACC,MAAI,CAAA,OAAER,EAAMhB,UAAU,EAAA,IAAAqB,UAAA,CAAA,IAAAI,EAAAC,EAAA,EAAAC,OAAAA,EAAAF,EAIfT,QAAAA,EAAMY,QAAO,EAAA,EAAAC,EAFlBC,EAAML,EAAA,IAAA,EAAA,EAAAM,EAAAN,EAAAR,EAITe,EAAO,CAACC,KAAI,OAAA,CAAA,CAAA,EAAAR,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAOGS,EAAA,CAAA,OAAA,CAAA"}